[Unit]
Description=layers-api: Kontur Layers API

[Service]
Type=forking

# WARNING: environment.rc and config files can override any variable defined here.
# WARNING: Do not guess, but read wrapper.sh script instead.

Environment=JAVA_HOME="/usr/lib/jvm/java-17-amazon-corretto"
Environment=APP_JAVA_OPTS="-server -Xms500m -Xmx2000m -XX:+HeapDumpOnOutOfMemoryError -Xlog:gc*:file=%h/log/layers-api.GC.log"
Environment=CLASSPATH=""
Environment=APP_ENTRY_POINT="-jar %JAR_FILE%"
Environment=APP_ARGS=""
Environment=SPRING_CONFIG_ADDITIONAL_LOCATION="file:%h/config.local.yaml"
Environment=APP_HOME="%h/current"
Environment=APP_BASE="%h"

WorkingDirectory=%h/current
ExecStart=/bin/bash -c "\"%h/bin/layers-api\" start"
ExecStop=/bin/bash -c "\"%h/bin/layers-api\" stop"

[Install]
WantedBy=default.target
